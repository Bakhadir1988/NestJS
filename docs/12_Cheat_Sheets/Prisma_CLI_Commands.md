# Шпаргалка: Ключевые команды Prisma CLI

Этот документ содержит список наиболее часто используемых команд Prisma CLI с объяснениями, когда и зачем их использовать.

---

## Основные команды

### `npx prisma init`
- **Что делает:** Инициализирует Prisma в вашем проекте. Создает папку `prisma` с файлом `schema.prisma` и добавляет переменную `DATABASE_URL` в файл `.env`.
- **Когда использовать:** В самом начале проекта, один раз.

---

## Команды для Миграций

### `npx prisma migrate dev`
- **Что делает:** Cамая главная команда в разработке. Она автоматически:
  1. Сравнивает вашу `schema.prisma` с состоянием базы данных.
  2. Создает новый файл миграции с SQL-инструкциями для приведения БД в соответствие со схемой.
  3. Применяет эту миграцию к базе данных.
- **Когда использовать:** Каждый раз, когда вы изменяете модели в `schema.prisma` и хотите зафиксировать эти изменения в виде миграции.
- **Полезный флаг:** `--name <имя-миграции>` позволяет дать миграции осмысленное имя (например, `npx prisma migrate dev --name add-boards-table`).

### `npx prisma migrate reset`
- **Что делает:** ⚠️ **(ОПАСНО, УДАЛЯЕТ ДАННЫЕ)** Сбрасывает базу данных до чистого состояния. Удаляет все таблицы и данные, а затем заново применяет всю историю миграций из папки `prisma/migrations`.
- **Когда использовать:** Только в разработке, если база данных или история миграций "запутались" и вы хотите начать с чистого листа. **Никогда не используйте в продакшене!**

### `npx prisma migrate status`
- **Что делает:** Показывает статус всех миграций: какие применены к базе данных, а какие еще нет.
- **Когда использовать:** Для диагностики, чтобы понять, синхронизирована ли ваша база данных с папкой `migrations`.

---

## Команды для прямого взаимодействия с БД

### `npx prisma db push`
- **Что делает:** ⚠️ **(ОСТОРОЖНО)** Напрямую "проталкивает" состояние вашей `schema.prisma` в базу данных, **не создавая файлов миграций**.
- **Когда использовать:** Идеально для быстрого прототипирования и экспериментов в начале проекта. Также полезно для исправления рассинхронизации после ручного удаления файла миграции в разработке. Не рекомендуется как основной способ работы с БД.

### `npx prisma db seed`
- **Что делает:** Запускает скрипт для начального наполнения базы данных. Скрипт должен быть определен в вашем `package.json` в секции `"prisma"`.
- **Когда использовать:** Чтобы заполнить базу данных тестовыми или начальными данными после создания (например, создать пользователя-администратора).

---

## Команды для работы с Prisma Client

### `npx prisma generate`
- **Что делает:** Читает вашу `schema.prisma` и генерирует/обновляет `PrismaClient` в папке `node_modules/@prisma/client` (или по пути, указанному в `output`). Этот клиент строго типизирован под ваши модели.
- **Когда использовать:** **Обязательно** после каждого изменения в `schema.prisma`. NestJS CLI часто запускает эту команду автоматически, но полезно знать о ней.

---

## Утилиты и инструменты

### `npx prisma format`
- **Что делает:** Автоматически форматирует ваш файл `schema.prisma` (или файлы в `prisma/schema/`), чтобы он выглядел чисто и опрятно.
- **Когда использовать:** Регулярно, для поддержания чистоты кода схемы.

### `npx prisma validate`
- **Что делает:** Проверяет вашу схему на наличие логических ошибок (например, неправильно определенные связи).
- **Когда использовать:** Чтобы убедиться, что ваша схема корректна, особенно при использовании сложных или разделенных на несколько файлов схем.

### `npx prisma studio`
- **Что делает:** Запускает локальный веб-интерфейс (GUI) в браузере, который позволяет просматривать, редактировать, добавлять и удалять данные в вашей базе.
- **Когда использовать:** Постоянно в процессе разработки для проверки того, что данные правильно сохраняются в БД, и для ручного редактирования записей. Это невероятно удобный инструмент.
