# Прогресс обучения NestJS

**Дата последнего занятия:** 05.02.2026

---

### Урок 09: Продвинутый Backend (Phase 2)

- [x] **Теория и Практика: Фильтрация.** Завершено практическое задание из прошлого урока. Реализована фильтрация (поиск по названию) для эндпоинта `GET /boards`.
  - `PaginationQueryDto` был расширен полем `search`.
  - `BoardsService` научился динамически конструировать `where`-объект для Prisma.
- [x] **Теория и Практика: Soft Delete.** Реализовано "мягкое удаление" для `BoardsModule`.
  - Схема Prisma обновлена, добавлено поле `deletedAt`.
  - `delete`-метод переписан на `updateMany` для установки флага `deletedAt`.
  - Все `find`-методы (`findMany`, `findOne`) обновлены для исключения "удаленных" записей из выборки.
  - Проведен полный цикл отладки (ошибки типизации, Prisma Client).
- [x] **Теория и Практика: Permissions & Roles (Фундамент).** Заложена архитектурная основа для системы прав доступа.
  - Старая система владения "один-ко-многим" была удалена.
  - Создана новая схема "многие-ко-многим" через связующую модель `BoardMembership` и `enum Role`.
  - Проведен полный рефакторинг `BoardsService` для работы с новой схемой.
  - Проведено регрессионное тестирование для проверки работоспособности API после рефакторинга.
- [ ] **Практическое задание:** Реализовать эндпоинт для приглашения пользователя на доску.

---

**Дата последнего занятия:** 02.02.2026

---

### Урок 08: Пагинация и Фильтрация (Phase 2)

- [x] **Теория:** Изучили подходы к пагинации (Offset-based vs Cursor-based) и выбрали Offset-based как наиболее подходящий для проекта. Обсудили важность возврата мета-данных (total count).
- [x] **Документация:** Создали новый раздел `docs/08_advanced_backend` и документ `01-pagination-and-filtering.md`.
- [x] **Практика:** Реализована пагинация для эндпоинта `GET /boards`:
  - Создан переиспользуемый `PaginationQueryDto` в `src/common/dto/`.
  - `BoardsController` обновлен для приема query-параметров пагинации.
  - `BoardsService` обновлен для выполнения запросов с `skip` и `take`.
  - Реализован подсчет `total` через `prisma.$transaction` для возврата мета-данных.
  - `ResponseTransformInterceptor` модифицирован для корректной обработки ответов с пагинацией (с ключом `meta`).
- [ ] **Практическое задание:** Реализовать фильтрацию (поиск) по названию для `GET /boards`.

---

**Дата последнего занятия:** 01.02.2026

---

### Урок 07: Построение первого CRUD-модуля

- [x] Практика: Реализован полный CRUD для `BoardsModule`:
  - **Create:** `POST /boards` с привязкой к пользователю.
  - **Read:** `GET /boards` (с фильтрацией по пользователю) и `GET /boards/:id` (с проверкой владения).
  - **Update:** `PATCH /boards/:id` с проверкой владения.
  - **Delete:** `DELETE /boards/:id` с проверкой владения.
- [x] Теория и практика: Применены DTO для создания и обновления.
- [x] Теория и практика: Применена сериализация (`BoardEntity`, `ClassSerializerInterceptor`) для сокрытия полей в ответе.
- [x] Практика: Настроена модульная схема Prisma (`prismaSchemaFolder`).
- [x] Практика: Отлажены ошибки `403`, `404` и `500` в разных сценариях.

---

## Важное изменение: Смена проекта

- [x] **Проект изменен с "Habit Tracker" на "Kanban API".** Обновлены `Product_Vision.md` и `Roadmap.md`. База данных и код были отрефакторены.

---

## Пройденные темы:

### Раздел 0: Введение

- [x] Документ: Что такое NestJS
- [x] Документ: Философия и архитектура NestJS
- [x] Документ: NestJS vs. Express
- [x] Практика №1: Создание `ProfileModule` с контроллером и сервисом, импорт в `AppModule`.

### Раздел 1: Ядро (Core)

- [x] Документ: Модули (`Modules`)
- [x] Документ: Контроллеры (`Controllers`)
- [x] Практика №3: Расширение `ProfileController` (CRUD для skills, @Param, @Query, @Body).
- [x] Документ: Провайдеры и Сервисы (`Providers_and_Services.md`)
- [x] Документ: Внедрение Зависимостей (`Dependency_Injection.md`)
- [x] Практика №4: Рефакторинг `ProfileService`, создание и внедрение `SkillsService`.
- [x] Документ: Жизненный цикл приложения (`Lifecycle`)

### Раздел 03_Adv: CRUD Advanced (Deep Nesting, Guards, Business Logic)

- [x] Документ: `07_CRUD_Advanced.md`
- [x] Практика: Реализован полный CRUD для Kanban API:
  - Доски (Board) — CRUD с полной защитой JWT
  - Колонки (Column) — вложенные ресурсы с проверкой доступа
  - Задачи (Task) — трёхуровневая иерархия
  - Перемещение задач между колонками
  - Custom декоратор `@CurrentUser` для получения текущего пользователя
  - Управление порядком элементов через поле `order`
  - Валидация через DTO на каждом уровне

### Раздел 02: Data Validation

- [x] Документ: `Validation_Pipe.md` (включая концепцию DTO)
- [x] Практика: Глобальное применение `ValidationPipe` и его тестирование.
- [x] Документ: `Custom_Pipes.md`
- [x] Практика: Создание и отладка кастомного пайпа.
- [x] Документ: `Serialization.md`
- [x] Практика: Создание `UsersModule` (CRUD). Реализация сериализации для скрытия пароля в ответах API.

### Раздел 03: Поток Запроса (Request Flow)

- [x] Документ: `Guards.md` (Гарды)
- [x] Практика: Создание `ApiKeyGuard` для защиты эндпоинтов.
- [x] Документ: `Interceptors.md` (Перехватчики)
- [x] Практика: Создание `ResponseTransformInterceptor` для стандартизации всех ответов API.
- [x] Документ: `Pipes.md` (Сводный документ-шпаргалка).
- [x] Документ: `Exception_Filters.md` (Фильтры исключений). Реализована обработка ошибок Prisma.

### Раздел 04: Database

- [x] Документ: `Prisma.md`
- [x] Практика: Обновление схемы, создание и сброс миграций.

### Раздел 05: Конфигурация (Configuration)

- [x] Документ: `Config_Module.md`
- [x] Практика: Установка `@nestjs/config`, создание `.env` файла и рефакторинг `AuthModule` и `JwtStrategy` для безопасной загрузки `JWT_SECRET`.

### Раздел 06: Аутентификация и Авторизация

- [x] Документ: `Auth_Overview.md`
- [x] Документ: `JWT.md`
- [x] Практика: Реализован полный цикл аутентификации:
  - Хеширование паролей при регистрации с `bcrypt`.
  - Создание `AuthModule`, `AuthService`.
  - Реализация `LocalStrategy` для проверки логина/пароля.
  - Реализация `JwtStrategy` для проверки токенов.
  - Создание эндпоинта `POST /auth/login`, возвращающего `access_token`.
  - Создание защищенного эндпоинта `GET /users/me`.
  - Строгая типизация (`JwtPayload`, `UserFromJwt`, `RequestWithUser`).

---

## Следующий шаг:

На следующем занятии мы перейдём к **Phase 2: Advanced Features**.

### Что будет дальше:

1. **Pagination & Filtering** — добавить пагинацию и фильтрацию для больших списков досок и задач
2. **Soft Delete** — реализовать "мягкое" удаление вместо физического удаления из БД
3. **Board Permissions & Roles** — система прав доступа (владелец, участник, зритель)
4. **Task Labels/Tags** — добавить метки для задач
5. **Advanced Database Queries** — оптимизация запросов, индексы, связи

После Phase 2 мы перейдём к:

- **Caching** (Redis)
- **Real-time Updates (WebSockets)**
- **Event-Driven Architecture**
- **Production-ready features** (логирование, мониторинг, Docker)
